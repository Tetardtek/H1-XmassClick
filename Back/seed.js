// eslint import/no-extraneous-dependencies: ["error", {"devDependencies": true}]

// Load environment variables from .env file
require("dotenv").config();

// Import database client
const database = require("./database/client");

const insertUsers = async () => {
  return database.query(`
  INSERT INTO users (firstname, lastname, nickname, mail, birthdate, logdate, password, roles_id, players_id) VALUES
  ('Admin', 'istrator', 'Administrator', 'administrator@email.com', '2000-01-01', '2000-01-02', '$2b$10$4VWdZ7SANvRr7qn3k6LAEu6eGApGQUvPOqcCCmgzVLKNlSpBL0rGa', 3, 1),
  ('Mode', 'rator', 'Moderator', 'moderator@email.com', '2010-01-01', '2010-01-02', '$2b$10$c4u.4Q1LzVQBKm.SKX2nPuWEZ/I3jiMUygxr.mMZK4MVJilKYX0rC', 2, 2)
  `);
};

const seed = async () => {
  try {
    await database.query("START TRANSACTION");

    await insertUsers();

    await database.query("COMMIT");

    database.end();

    console.info(`${database.databaseName} filled from ${__filename} ðŸŒ±`);
  } catch (err) {
    await database.query("ROLLBACK");
    console.error("Error filling the database:", err.message);
  }
};

seed();
